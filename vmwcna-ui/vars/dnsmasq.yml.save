#
#  Copyright 2015 VMware, Inc.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#
---
#--- Network Services on specific nics
# the general domain name to serve up
dnsmasq_domain_name: "cloudbuilders.vmware.local"

# dhcp interfaces (implicitely *not* DHCP serving)
dnsmasq_external_interfaces:
  - eth0

# For each net device that DHCP is desired, set the network up as a static router interface
dnsmasq_dhcp_networks:
  - {  device: eth1, address: "172.16.69.1",  netmask: "255.255.255.0", broadcast: "172.16.69.255",  range: "172.16.69.64,172.16.69.254",   lease: 1440, dns: "172.16.69.1" }
  - {  device: eth2, address: "172.16.172.1", netmask: "255.255.255.0", broadcast: "172.16.172.255", range: "172.16.172.64,172.16.172.254", lease: 1440, dns: "172.16.172.1" }
  - {  device: eth3, address: "172.16.192.1", netmask: "255.255.255.0", broadcast: "172.16.192.255", range: "172.16.192.64,172.16.192.254", lease: 1440, dns: "172.16.192.1" }

# Set static reservations here for assuring specific serves addresses
# These need not be in the ranges above.
dnsmasq_dhcp_reservations:
  - { mac: "00:50:56:3A:E7:D1", address: "172.16.69.51", hostname: "esx-01a.{{ dnsmasq_domain_name }}" }
  - { mac: "00:50:56:3D:D8:6C", address: "172.16.69.52", hostname: "esx-02a.{{ dnsmasq_domain_name }}" }
  - { mac: "00:50:56:24:6E:F2", address: "172.16.69.53", hostname: "esx-03a.{{ dnsmasq_domain_name }}" }
  - { mac: "00:0C:29:CF:1C:61", address: "172.16.172.10", hostname: "nfs-01a.{{ dnsmasq_domain_name }}" }

# hosts not otherwise setup by DHCP requestors we want in the domain.
dnsmasq_additional_hosts:
  - { ipv4: "10.150.111.238", host: "gerrit.{{ dnsmasq_domain_name }}" }
  - { ipv4: "172.16.69.1", host: "router.{{ dnsmasq_domain_name }}" }
  - { ipv4: "172.16.69.22", host: "vc-l-01a.{{ dnsmasq_domain_name }}" }

# alias (cname) records
dnsmasq_cnames:
  - { host: "redmine.{{ dnsmasq_domain_name }}", target: "gerrit.{{ dnsmasq_domain_name }}" }
  - { host: "chaperone-ui.{{ dnsmasq_domain_name }}", target: "router.{{ dnsmasq_domain_name }}" }
  - { host: "tftp.{{ dnsmasq_domain_name }}", target: "router.{{ dnsmasq_domain_name }}" }

# Enable tftp services
dnsmasq_enable_tftp: True
dnsmasq_tftp_iso: "/var/www/html/downloads/VMware-VMvisor-Installer-6.0.0-2494585.x86_64.iso"

# esxi info
esxi_full_access_users: root
esxi_nfs_stores:
  - { ipv4: "nfs-01a.{{ dnsmasq_domain_name }}",  export: "/exports/management", vol_name: "nfs-01a" }
esxi_firewall_enabled: "no"
esxi_dhcp_vmnics:
  - vmnic0
  - vmnic1
